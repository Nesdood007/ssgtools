# Index Generator

This is a tool used to create a blog-styled table of contents using a separate header and footer file from the SSG renderer.

## System Requirements

To run this program, your computer must comply with the following:

- Python 3.5+ installed

_This program has only been tested on linux. It is unknown if it will work on Windows or BSD. There really shouldn't be any reason that it wouldn't._

## Usage

`./main.py src dst [header content footer]`

or

`./main.py src dst <.index>`

The index Generator can be invoken in 2 ways: single mode, and multi-mode.

### Single-Mode:

In single mode, the index generator will only generate one index based off of the paths given. It will ignore any `.index` file.

Usage: `./main.py src dst [header content footer]`

`src` - Source Path to begin looking for MArkdown files in

`dst` - Destination Path (not including filename) to place the index.html file

`header` - Header File. If not specified, it will look for `_index_header.html` in the Source Directory

`content` - Content File. This is what the variables will be inserted into to generate the index. If not specified, it will look for `_index_content.html` in the Source Directory

`footer` - Footer File. If not specified, it will look for `_index_footer.html` in the Source Directory

Output will consist of status of each file read to allow for easy debugging.

### Multi-Mode

In Multi-Mode, the index generator will look for a `.index` file specified in the parameters.

Usage: `./main.py src dst <.index>`

`src` - Source Path to begin looking for MArkdown files in

`dst` - Destination Path (not including filename) to place the index.html file

`<.index>` - Filename of the .index file (usually located in the source directory) See below for instructions on building one.

# How this works:

This program reads all .md files in the src directory, and reads the YAML* metadata from the header. This is stored in memory.

After all files are read, then the Table of Contents Page is Generated, from the total number of articles, and also for just tags.

  - For Page Generation, the body is concatinated with the header and footer. For each article, the contents of the post template are evaluated, and inserted into the _index_content.html template file, and added into the body. Posts will be added in order of most recent post (as specified by the date in the metadata, or the value of the `_SORT` variable).

# Files:
`_index_header.html`: Header Segment

`_index_content.html`: Post Template

`_index_footer.html`: Footer Segment
  
# Templating Info:

All markdown files that need to appear in an index should contain variables in the header (specified by `---`). The index generator then looks at each individual markdown file and reads these variables and populates a _index_content.html file with them, and inserts it into the index page.
  
Variables should look like: {varname}

## Variable naming Scheme:
  `{varname}`: All variables are within {}, and the names match variables given in

  All variable names that are in .md files should be lowercase in name. _(this is not required, but will make it less likely to intersect with variables generated by the index generator)_

  All Built-in Variables (those that are created by the program) should be in all caps.

  Any Built-in Variable that is temporarily used internally for things like sorting or whatever should be prefixed with an underscore

### Built-ins:
  `{PATH}`: This is the URL that points to the file

  `{_SORT}`: This is for internal sorting. Use only for debugging

  `{_ERROR}`: Prints errors that occured while processing the file. Use only for Debugging

  `{_STATUS}`: Prints the end status of that file. Will not print the entire error

  `{_WARNING}`: Prints all Warnings that occured, such as missing variables
    
## Things to keep in mind:

### DATE FORMAT:

Date should be formatted as __YYYY-MM-DD__ where all 3 categories are numbers

### YAML:

The YAML parsed here doesn't understand structure, so any nested YAML variables will NOT work as expected. Therefore, do not nest them.

## Making a template

Like the normal template, the webpage is split up into 3 components: the header, content, and footer. The header and footer function exactly as the SSG4 template in that it is what sandwiches the content of the page.

The content, however, will consist of an HTML segment that will be repeated into the index page, one for each entry. It should look something like the following:

```
<a href="{PATH}"> {title} </a>
<p> {description} </p>
```

and the YAML header would contain the following (assuming it's called test.md):

```
---
title: Test
description: This is a test.
---
```

This would generate the following entry:
```
<a href="test.md"> Test </a>
<p> This is a test </p>
```

## .ignore file

The .ignore file is read to determine which files should be ignored in generating the index. It should look like the following:

```
# I'm a comment
/_template*
<file path>
```

Each entry is a file path (can contain things like '*'), and any file that matches this expression is not included in the index. Please note that having inline comments is not supported for the ignore file.

A .ignore file should be placed in the source directory where the index will be generated.

## .index file

This is the file that determines where indicies are generated.

It should look like the following:

```
# I'm a comment
/ / _index_header.html _index_content.html _index_footer.html
```

Each entry should follow this format

`<SRC> <DST> [<HEADER> <CONTENT> <FOOTER>]`

`<SRC>` - Source of Index

`<DST>` - Destination where the index.html will be placed.

`<HEADER>` - Location of the Header File. If not specified, then same behaviour as the regular parameters.

`<CONTENT>` - Location of the Content File. If not specified, then same behaviour as the regular parameters.

`<FOOTER>` - Location of the Footer File. If not specified, then same behaviour as the regular parameters.

# Files in the Directory:

`.ignore` - A List of UNIX File PAths to ignore

`.index` (root only) - Lists where all Generated Indicies will be.
    
## Format:

Each entry will consist of the following (one entry per line): `<Source Directory> <Destination Directory> [<Header Template> <Content Template> <Footer Template>]`

`*` - Please note that the index generator doesn't actually use YAML, but instead a key/value pair seperated by a `:`.